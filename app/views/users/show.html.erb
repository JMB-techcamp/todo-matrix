<!-- "/app/assets/stylesheets/mypage_style.css" -->
<% todolen = @todos.length %>
<% time_now = Time.now %>
<% time_limit = time_now + 1.day %>
<% max_todo_length = 15%>
<% do_ratio = 0.42/0.5 %>
<% decide_ratio = 0.36/0.5 %>
<header>
  <div class="title"><h1>My Page</h1></div>
  <div class="icon"><a href="/users/todos" class="btn"> <i class="far fa-file-alt fa-5x"></i><div class="icon-text">TODO</div></a></div>
  <div class="icon"><a href="/todos/new" class="btn"><i class="fas fa-plus fa-5x"></i><div class="icon-text">追加</div></a></div>
  <div class="icon"><a href="/users/todos" class="btn"> <i class="fas fa-search fa-5x"></i><div class="icon-text">検索</div></a></div>
  <div class="icon"><a href="/users/edit" class="btn"><i class="fas fa-cog fa-5x"></i><div class="icon-text">設定</div></a></div>
</header>
<div class="todo-mat">
  <div class="contents-row">
    <div class="contents-left" id="important">
      <h1>緊急 ＆ 重要</h1>
      <%  @todos_urgent.each_with_index do |todo, i| %>
        <% if i <= @todos_urgent.length * do_ratio then %>
          <li>
            <a> <%= truncate(todo.title, length: max_todo_length) %></a>
          </li>
          <hr>
        <% end %>
      <% end %>
    </div>
    <div class="contents-right" id="decide">
      <h1>重要 （緊急ではない）</h1>
      <%  @todos_noturgent.each_with_index do |todo, i| %>
        <% if i <= @todos_noturgent.length * decide_ratio then %>
          <li>
            <a > <%= truncate(todo.title, length: max_todo_length) %></a>
          </li>
          <hr>
        <% end %>
      <% end %>
    </div>
  </div>
  <!-- <hr> -->
  <div class="contents-row">
    <div class="contents-left" id="delegate">
      <h1>緊急 （重要ではない）</h1>
      <%  @todos_urgent.each_with_index do |todo, i| %>
        <% if i > @todos_urgent.length * do_ratio then %>
          <li>
            <!-- <div class="urgent"><i class="far fa-clock fa-2x"></i></div> -->
            <a><%= truncate(todo.title, length: max_todo_length) %></a>
          </li>
          <hr>
        <% end %>
      <% end %>
    </div>
    <div class="contents-right" id="delete">
      <h1>削除</h1>
      <%  @todos_noturgent.each_with_index do |todo, i| %>
        <% if i > @todos_noturgent.length * decide_ratio then %>
          <li>
              <a><%= truncate(todo.title, length: max_todo_length) %></a>
          </li>
          <hr>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<!-- モーダルウインドウ -->
<div id="modal-main1" class="modal">
  <h1>すぐに片付けよう！</h1>
  <%  @todos_urgent.each_with_index do |todo, i| %>
    <% if i <= @todos_urgent.length * do_ratio then %>
      <li>
        <a href=<%="/todos/#{todo.id}"%>><%= truncate(todo.title, length: max_todo_length)%></a>
      </li>
      <hr>
    <% end %>
  <% end %>
</div>

<div id="modal-main2" class="modal">
  <h1>時間を確保してやろう！</h1>
  <%  @todos_noturgent.each_with_index do |todo, i| %>
    <% if i <= @todos_noturgent.length * decide_ratio then %>
      <li>
        <a href=<%="/todos/#{todo.id}"%>><%= truncate(todo.title, length: max_todo_length)%></a>
      </li>
      <hr>
    <% end %>
  <% end %>
</div>

<div id="modal-main3" class="modal">
  <h1>なるべく人に任せてみよう！</h1>
  <%  @todos_urgent.each_with_index do |todo, i| %>
    <% if i > @todos_urgent.length * do_ratio then %>
      <li>
        <!-- <div class="urgent"><i class="far fa-clock fa-2x"></i></div> -->
        <a href=<%="/todos/#{todo.id}"%>><%= truncate(todo.title, length: max_todo_length)%></a>
      </li>
      <hr>
    <% end %>
  <% end %>
</div>

<div id="modal-main4" class="modal">
  <h1>これは後回しにしよう！</h1>
  <%  @todos_noturgent.each_with_index do |todo, i| %>
    <% if i > @todos_noturgent.length * decide_ratio then %>
      <li>
          <a href=<%="/todos/#{todo.id}"%>><%= truncate(todo.title, length: max_todo_length) %></a>
      </li>
      <hr>
    <% end %>
  <% end %>
</div>
